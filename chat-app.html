<!DOCTYPE html>
<html lang="en-us">

<head>

    <meta charset="UTF-8">
    <title>Chat App</title>

    <!-- -->
    <script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js"></script>

</head>

<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <div id="container">
        <input type="text" id="username" placeholder="Type your username here">
        <button id="login">Log in</button>

    </div>


    <script>

        var config = {
            apiKey: "AIzaSyAwrExxiH0nMkEWZzfrgIxW6mXz2jyMHXk",
            authDomain: "https://chat-app-l394.firebaseapp.com/",
            databaseURL: "https://chat-app-l394.firebaseio.com/",
            projectId: "chat-app-l394",
        };
        firebase.initializeApp(config);

        var database = firebase.database();


        $('#login').on('click', function () {
            var user = $('#username').val()
              
            let message = $('<input>')
            let send = $('<button>')
            message.attr("id", "type-message").attr("placeholder", "Type your message here")
            send.attr("id", "send").text("Send")
            $('#container').html(message).append(send)

            $('#send').on('click', function () {
                let users_message = $('#type-message').val()
                database.ref().set({
                    username : user , 
                    message: users_message
                })

                $('#type-message').val('')
                $('#container').append($('<div id="message">'))
                $('#message').append('<div>' + '<strong>' + user + '</strong>' + ": " + users_message + '</div>')
            })

        })




    // $("#click-button").on("click", function() {
    //   clickCounter++;
    //   database.ref().set({
    //     clickCount: clickCounter
    //   });
    // });


    // database.ref().on("value", function(snapshot) {
    //   console.log(snapshot.val());
    //   $("#click-value").text(snapshot.val().clickCount);
    //   clickCounter = snapshot.val().clickCount;
    // }, function(errorObject) {
    //   console.log("The read failed: " + errorObject.code);
    // });

    </script>

</body>

</html>